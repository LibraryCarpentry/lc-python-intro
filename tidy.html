<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Python Intro for Libraries: Tidy Data with Pandas</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/lc/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/lc/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/lc/favicon-16x16.png"><link rel="manifest" href="favicons/lc/site.webmanifest"><link rel="mask-icon" href="favicons/lc/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav library"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="lc-logo" alt="Library Carpentry" src="assets/images/library-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>


      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/tidy.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav library" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Library Carpentry" src="assets/images/library-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Python Intro for Libraries
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Python Intro for Libraries
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="exercises.html">Further Exercises</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Python Intro for Libraries
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 66%" class="percentage">
    66%
  </div>
  <div class="progress library">
    <div class="progress-bar library" role="progressbar" style="width: 66%" aria-valuenow="66" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/tidy.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="getting-started.html">1. Getting Started</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="variables.html">2. Variables and Types</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="lists.html">3. Lists</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="functions.html">4. Built-in Functions and Help</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="libraries.html">5. Libraries &amp; Pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="for-loops.html">6. For Loops</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="looping-data-sets.html">7. Looping Over Data Sets</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="pandas.html">8. Using Pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="conditionals.html">9. Conditionals</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="writing-functions.html">10. Writing Functions</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        11. Tidy Data with Pandas
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#tidy-data-in-pandas">Tidy Data in Pandas</a></li>
<li><a href="#tidy-data">Tidy Data</a></li>
<li><a href="#making-our-data-tidy">Making Our Data Tidy</a></li>
<li><a href="#adding-a-date-column">Adding a Date Column</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="data-visualisation.html">12. Data Visualisation</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="wrap.html">13. Wrap-Up</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="exercises.html">Further Exercises</a></li><li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="writing-functions.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="data-visualisation.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="writing-functions.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Writing Functions
        </a>
        <a class="chapter-link float-end" href="data-visualisation.html" rel="next">
          Next: Data Visualisation...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Tidy Data with Pandas</h1>
        <p>Last updated on 2025-12-18 |

        <a href="https://github.com/librarycarpentry/lc-python-intro/edit/main/episodes/tidy.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>What are the benefits of transforming data into a tidy format for
analysis?</li>
<li>How does the melt() function in pandas facilitate data tidying?</li>
<li>What are some practical challenges when working with real-world
datasets in Python, and how can they be addressed?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Identify the characteristics of tidy data and explain its benefits,
listing the three principles and discussing how it facilitates data
analysis during a review session.</li>
<li>Use pandas functions like concat(), melt(), and data filtering to
manipulate and clean a complex dataset, successfully combining multiple
files into a single DataFrame and reshaping it using melt()</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="tidy-data-in-pandas">Tidy Data in Pandas<a class="anchor" aria-label="anchor" href="#tidy-data-in-pandas"></a></h2>
<hr class="half-width"><p>Let’s import the pickle file that contains all of our Chicago public
library circulation data in a single DataFrame. We can use the Pandas
<code>.read_pickle()</code> method to do so.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>df <span class="op">=</span> pd.read_pickle(<span class="st">'data/all_years.pkl'</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>df.head()</span></code></pre>
</div>
<table style="width:100%;" class="table"><colgroup><col width="2%"><col width="8%"><col width="13%"><col width="4%"><col width="5%"><col width="4%"><col width="5%"><col width="3%"><col width="3%"><col width="3%"><col width="3%"><col width="3%"><col width="4%"><col width="6%"><col width="4%"><col width="5%"><col width="5%"><col width="4%"><col width="3%"></colgroup><thead><tr class="header"><th></th>
<th>branch</th>
<th>address</th>
<th>city</th>
<th>zip code</th>
<th>january</th>
<th>february</th>
<th>march</th>
<th>april</th>
<th>may</th>
<th>june</th>
<th>july</th>
<th>august</th>
<th>september</th>
<th>october</th>
<th>november</th>
<th>december</th>
<th>ytd</th>
<th>year</th>
</tr></thead><tbody><tr class="odd"><td>0</td>
<td>Albany Park</td>
<td>5150 N. Kimball Ave.</td>
<td>Chicago</td>
<td>60625.0</td>
<td>8427</td>
<td>7023</td>
<td>9702</td>
<td>9344</td>
<td>8865</td>
<td>11650</td>
<td>11778</td>
<td>11306</td>
<td>10466</td>
<td>10997</td>
<td>10567</td>
<td>9934</td>
<td>120059</td>
<td>2011</td>
</tr><tr class="even"><td>1</td>
<td>Altgeld</td>
<td>13281 S. Corliss Ave.</td>
<td>Chicago</td>
<td>60827.0</td>
<td>1258</td>
<td>708</td>
<td>854</td>
<td>804</td>
<td>816</td>
<td>870</td>
<td>713</td>
<td>480</td>
<td>702</td>
<td>927</td>
<td>787</td>
<td>692</td>
<td>9611</td>
<td>2011</td>
</tr><tr class="odd"><td>2</td>
<td>Archer Heights</td>
<td>5055 S. Archer Ave.</td>
<td>Chicago</td>
<td>60632.0</td>
<td>8104</td>
<td>6899</td>
<td>9329</td>
<td>9124</td>
<td>7472</td>
<td>8314</td>
<td>8116</td>
<td>9177</td>
<td>9033</td>
<td>9709</td>
<td>8809</td>
<td>7865</td>
<td>101951</td>
<td>2011</td>
</tr><tr class="even"><td>3</td>
<td>Austin</td>
<td>5615 W. Race Ave.</td>
<td>Chicago</td>
<td>60644.0</td>
<td>1755</td>
<td>1316</td>
<td>1942</td>
<td>2200</td>
<td>2133</td>
<td>2359</td>
<td>2080</td>
<td>2405</td>
<td>2417</td>
<td>2571</td>
<td>2233</td>
<td>2116</td>
<td>25527</td>
<td>2011</td>
</tr><tr class="odd"><td>4</td>
<td>Austin-Irving</td>
<td>6100 W. Irving Park Rd.</td>
<td>Chicago</td>
<td>60634.0</td>
<td>12593</td>
<td>11791</td>
<td>14807</td>
<td>14382</td>
<td>11754</td>
<td>14402</td>
<td>14605</td>
<td>15164</td>
<td>14306</td>
<td>15357</td>
<td>14069</td>
<td>12404</td>
<td>165634</td>
<td>2011</td>
</tr></tbody></table><div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>df.tail()</span></code></pre>
</div>
<table class="table"><colgroup><col width="2%"><col width="8%"><col width="13%"><col width="5%"><col width="5%"><col width="5%"><col width="5%"><col width="4%"><col width="4%"><col width="3%"><col width="3%"><col width="3%"><col width="4%"><col width="6%"><col width="5%"><col width="5%"><col width="5%"><col width="4%"><col width="3%"></colgroup><thead><tr class="header"><th></th>
<th>branch</th>
<th>address</th>
<th>city</th>
<th>zip code</th>
<th>january</th>
<th>february</th>
<th>march</th>
<th>april</th>
<th>may</th>
<th>june</th>
<th>july</th>
<th>august</th>
<th>september</th>
<th>october</th>
<th>november</th>
<th>december</th>
<th>ytd</th>
<th>year</th>
</tr></thead><tbody><tr class="odd"><td>958</td>
<td>Chinatown</td>
<td>2100 S. Wentworth Ave.</td>
<td>Chicago</td>
<td>60616.0</td>
<td>4795</td>
<td>4258</td>
<td>5316</td>
<td>5343</td>
<td>4791</td>
<td>5367</td>
<td>5477</td>
<td>5362</td>
<td>4991</td>
<td>4847</td>
<td>4035</td>
<td>3957</td>
<td>58539</td>
<td>2022</td>
</tr><tr class="even"><td>959</td>
<td>Brainerd</td>
<td>1350 W. 89th St.</td>
<td>Chicago</td>
<td>60620.0</td>
<td>255</td>
<td>264</td>
<td>370</td>
<td>386</td>
<td>399</td>
<td>421</td>
<td>337</td>
<td>373</td>
<td>361</td>
<td>276</td>
<td>256</td>
<td>201</td>
<td>3899</td>
<td>2022</td>
</tr><tr class="odd"><td>960</td>
<td>Brighton Park</td>
<td>4314 S. Archer Ave.</td>
<td>Chicago</td>
<td>60632.0</td>
<td>1394</td>
<td>1321</td>
<td>1327</td>
<td>1705</td>
<td>1609</td>
<td>1578</td>
<td>1609</td>
<td>1512</td>
<td>1425</td>
<td>1603</td>
<td>1579</td>
<td>1278</td>
<td>17940</td>
<td>2022</td>
</tr><tr class="even"><td>961</td>
<td>South Chicago</td>
<td>9055 S. Houston Ave.</td>
<td>Chicago</td>
<td>60617.0</td>
<td>496</td>
<td>528</td>
<td>739</td>
<td>775</td>
<td>587</td>
<td>804</td>
<td>720</td>
<td>883</td>
<td>681</td>
<td>697</td>
<td>799</td>
<td>615</td>
<td>8324</td>
<td>2022</td>
</tr><tr class="odd"><td>962</td>
<td>Chicago Bee</td>
<td>3647 S. State St.</td>
<td>Chicago</td>
<td>60609.0</td>
<td>799</td>
<td>543</td>
<td>709</td>
<td>803</td>
<td>707</td>
<td>931</td>
<td>778</td>
<td>770</td>
<td>714</td>
<td>835</td>
<td>718</td>
<td>788</td>
<td>9095</td>
<td>2022</td>
</tr></tbody></table><p>Let’s take a moment to discuss the setup of our DataFrame. It is
structured in what is known as a wide format. This format displays an
extensive amount of data directly on the screen, with each month’s
circulation counts spread across the columns in a pivoted manner. This
layout makes it easier to read and manually manipulate the data in a
spreadsheet and because of this, is often the default output for
periodic reporting systems like integrated library systems.</p>
<p>However, this wide format can pose challenges when working with data
analysis tools like Pandas. For instance, if we need to identify all the
library branches where circulation exceeded 10,000 in any given month,
we would have to individually check each column dedicated to a month,
which can be quite cumbersome.</p>
<p>To address this we can reshape our data in a long format. This is
sometimes called un-pivoting the data, and in our case the month columns
will become a single variable in the dataset.</p>
</section><section><h2 class="section-heading" id="tidy-data">Tidy Data<a class="anchor" aria-label="anchor" href="#tidy-data"></a></h2>
<hr class="half-width"><p>Tidy data is a standard way of organizing data values within a
dataset, making it easier to work with. Here are the key principles of
tidy data: 1. Every column holds a single variable, like “month” or
“temperature.” 2. Every row represents a single observation, like
circulation counts by branch and month. 3. Every cell contains a single
value.</p>
<p>The image below might help orient us to the concept of tidy data.</p>
<figure><img src="fig/tidy-1.png" alt="image showing variables in columns, observations in rows, and values in cellssan" class="figure mx-auto d-block"><div class="figcaption">Tidy Data</div>
</figure><p>R for Data Science <a href="https://r4ds.had.co.nz/tidy-data.html#fig:tidy-structure" class="external-link">12.1</a></p>
<div class="section level3">
<h3 id="benefits-of-tidy-data">Benefits of Tidy Data<a class="anchor" aria-label="anchor" href="#benefits-of-tidy-data"></a></h3>
<p>Transforming our data into a tidy data format provides several
advantages: - Python operations, such as visualization, filtering, and
statistical analysis libraries, work better with data in a tidy format.
- Tidy data makes transforming, summarizing, and visualizing information
easier. For instance, comparing monthly trends or calculating annual
averages becomes more straightforward. - As datasets grow, tidy data
ensures that they remain manageable and analyses remain accurate.</p>
</div>
</section><section><h2 class="section-heading" id="making-our-data-tidy">Making Our Data Tidy<a class="anchor" aria-label="anchor" href="#making-our-data-tidy"></a></h2>
<hr class="half-width"><p>A good step towards tidying our data would be to consolidate the
separate month columns into a column called <code>month,</code> and the
circulation counts into another column called
<code>circulation_counts.</code> This simplifies our data and aligns
with the principles of tidy data.</p>
<p>To achieve this transformation, we can use a Pandas function called
<code>melt()</code>. This function reshapes the data from wide to long
format, where each row will represent one month’s circulation data for a
branch. Let’s look at the help for <code>melt</code> first.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">help</span>(pd.melt)</span></code></pre>
</div>
<p>Now, let’s tidy our data. We’ll create a new dataframe called
<code>df_long</code> and use <code>melt</code> to reshape.
<code>melt</code> essentially melts down our columns into rows.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>df_long <span class="op">=</span> df.melt(id_vars<span class="op">=</span>[<span class="st">'branch'</span>, <span class="st">'address'</span>, <span class="st">'city'</span>, <span class="st">'zip code'</span>, <span class="st">'ytd'</span>, <span class="st">'year'</span>],</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>                    value_vars<span class="op">=</span>[<span class="st">'january'</span>, <span class="st">'february'</span>, <span class="st">'march'</span>, <span class="st">'april'</span>, <span class="st">'may'</span>, <span class="st">'june'</span>, </span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>                                <span class="st">'july'</span>, <span class="st">'august'</span>, <span class="st">'september'</span>, <span class="st">'october'</span>, <span class="st">'november'</span>, <span class="st">'december'</span>],</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>                    var_name<span class="op">=</span><span class="st">'month'</span>, value_name<span class="op">=</span><span class="st">'circulation'</span>)</span></code></pre>
</div>
<p>In the above code we use <code>id_vars</code> to list the columns we
do not want to melt. We then identify the columns we do want to melt
into rows in the <code>value_vars</code> parameter.
<code>var_name</code> is the variable name for the columns that will be
transformed into rows. <code>value_names</code> is the measured
variable, <code>circulation</code> in our case. Let’s now look at the
new structure of our data.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>df_long</span></code></pre>
</div>
<table class="table"><colgroup><col width="6%"><col width="15%"><col width="24%"><col width="8%"><col width="9%"><col width="7%"><col width="5%"><col width="9%"><col width="12%"></colgroup><thead><tr class="header"><th></th>
<th>branch</th>
<th>address</th>
<th>city</th>
<th>zip code</th>
<th>ytd</th>
<th>year</th>
<th>month</th>
<th>circulation</th>
</tr></thead><tbody><tr class="odd"><td>0</td>
<td>Albany Park</td>
<td>5150 N. Kimball Ave.</td>
<td>Chicago</td>
<td>60625.0</td>
<td>120059</td>
<td>2011</td>
<td>january</td>
<td>8427</td>
</tr><tr class="even"><td>1</td>
<td>Altgeld</td>
<td>13281 S. Corliss Ave.</td>
<td>Chicago</td>
<td>60827.0</td>
<td>9611</td>
<td>2011</td>
<td>january</td>
<td>1258</td>
</tr><tr class="odd"><td>2</td>
<td>Archer Heights</td>
<td>5055 S. Archer Ave.</td>
<td>Chicago</td>
<td>60632.0</td>
<td>101951</td>
<td>2011</td>
<td>january</td>
<td>8104</td>
</tr><tr class="even"><td>3</td>
<td>Austin</td>
<td>5615 W. Race Ave.</td>
<td>Chicago</td>
<td>60644.0</td>
<td>25527</td>
<td>2011</td>
<td>january</td>
<td>1755</td>
</tr><tr class="odd"><td>4</td>
<td>Austin-Irving</td>
<td>6100 W. Irving Park Rd.</td>
<td>Chicago</td>
<td>60634.0</td>
<td>165634</td>
<td>2011</td>
<td>january</td>
<td>12593</td>
</tr><tr class="even"><td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr><tr class="odd"><td>11551</td>
<td>Chinatown</td>
<td>2100 S. Wentworth Ave.</td>
<td>Chicago</td>
<td>60616.0</td>
<td>58539</td>
<td>2022</td>
<td>december</td>
<td>3957</td>
</tr><tr class="even"><td>11552</td>
<td>Brainerd</td>
<td>1350 W. 89th St.</td>
<td>Chicago</td>
<td>60620.0</td>
<td>3899</td>
<td>2022</td>
<td>december</td>
<td>201</td>
</tr><tr class="odd"><td>11553</td>
<td>Brighton Park</td>
<td>4314 S. Archer Ave.</td>
<td>Chicago</td>
<td>60632.0</td>
<td>17940</td>
<td>2022</td>
<td>december</td>
<td>1278</td>
</tr><tr class="even"><td>11554</td>
<td>South Chicago</td>
<td>9055 S. Houston Ave.</td>
<td>Chicago</td>
<td>60617.0</td>
<td>8324</td>
<td>2022</td>
<td>december</td>
<td>615</td>
</tr><tr class="odd"><td>11555</td>
<td>Chicago Bee</td>
<td>3647 S. State St.</td>
<td>Chicago</td>
<td>60609.0</td>
<td>9095</td>
<td>2022</td>
<td>december</td>
<td>788</td>
</tr></tbody></table><p>Ok, let’s look at the unique branches in our long DataFrame:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>df_long[<span class="st">'branch'</span>].unique()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array(['Albany Park', 'Altgeld', 'Archer Heights', 'Austin',
       'Austin-Irving', 'Avalon', 'Back of the Yards', 'Beverly',
       'Bezazian', 'Blackstone', 'Brainerd', 'Brighton Park',
       'Bucktown-Wicker Park', 'Budlong Woods', 'Canaryville',
       'Chicago Bee', 'Chicago Lawn', 'Chinatown', 'Clearing', 'Coleman',
       'Daley, Richard J. - Bridgeport', 'Daley, Richard M. - W Humboldt',
       'Douglass', 'Dunning', 'Edgebrook', 'Edgewater', 'Gage Park',
       'Galewood-Mont Clare', 'Garfield Ridge', 'Greater Grand Crossing',
       'Hall', 'Harold Washington Library Center', 'Hegewisch',
       'Humboldt Park', 'Independence', 'Jefferson Park', 'Jeffery Manor',
       'Kelly', 'King', 'Legler Regional', 'Lincoln Belmont',
       'Lincoln Park', 'Little Village', 'Logan Square', 'Lozano',
       'Manning', 'Mayfair', 'McKinley Park', 'Merlo', 'Mount Greenwood',
       'Near North', 'North Austin', 'North Pulaski', 'Northtown',
       'Oriole Park', 'Portage-Cragin', 'Pullman', 'Roden', 'Rogers Park',
       'Roosevelt', 'Scottsdale', 'Sherman Park', 'South Chicago',
       'South Shore', 'Sulzer Regional', 'Thurgood Marshall', 'Toman',
       'Uptown', 'Vodak-East Side', 'Walker', 'Water Works',
       'West Belmont', 'West Chicago Avenue', 'West Englewood',
       'West Lawn', 'West Pullman', 'West Town', 'Whitney M. Young, Jr.',
       'Woodson Regional', 'Wrightwood-Ashburn', 'Little Italy',
       'West Loop'], dtype=object)
</code></pre>
</div>
<p>Alright! Now that we have the data tidied what can we do with it?
Let’s look at which branches circulated over 10,000 items in any given
month. We can filter the <code>df_long</code> DataFrame to only show
rows that have a number greater than 10,000 in the
<code>circulation</code> column.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>df_long[df_long[<span class="st">'circulation'</span>] <span class="op">&gt;</span> <span class="dv">10000</span>]</span></code></pre>
</div>
<table style="width:100%;" class="table"><colgroup><col width="5%"><col width="27%"><col width="20%"><col width="7%"><col width="8%"><col width="6%"><col width="4%"><col width="8%"><col width="10%"></colgroup><thead><tr class="header"><th></th>
<th>branch</th>
<th>address</th>
<th>city</th>
<th>zip code</th>
<th>ytd</th>
<th>year</th>
<th>month</th>
<th>circulation</th>
</tr></thead><tbody><tr class="odd"><td>4</td>
<td>Austin-Irving</td>
<td>6100 W. Irving Park Rd.</td>
<td>Chicago</td>
<td>60634.0</td>
<td>165634</td>
<td>2011</td>
<td>january</td>
<td>12593</td>
</tr><tr class="even"><td>12</td>
<td>Bucktown-Wicker Park</td>
<td>1701 N. Milwaukee Ave.</td>
<td>Chicago</td>
<td>60647.0</td>
<td>173396</td>
<td>2011</td>
<td>january</td>
<td>13113</td>
</tr><tr class="odd"><td>13</td>
<td>Budlong Woods</td>
<td>5630 N. Lincoln Ave.</td>
<td>Chicago</td>
<td>60659.0</td>
<td>160271</td>
<td>2011</td>
<td>january</td>
<td>12841</td>
</tr><tr class="even"><td>17</td>
<td>Chinatown</td>
<td>2353 S. Wentworth Ave.</td>
<td>Chicago</td>
<td>60616.0</td>
<td>158449</td>
<td>2011</td>
<td>january</td>
<td>14027</td>
</tr><tr class="odd"><td>24</td>
<td>Edgebrook</td>
<td>5331 W. Devon Ave.</td>
<td>Chicago</td>
<td>60646.0</td>
<td>129288</td>
<td>2011</td>
<td>january</td>
<td>10231</td>
</tr><tr class="even"><td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr><tr class="odd"><td>11373</td>
<td>Harold Washington Library Center</td>
<td>400 S. State St.</td>
<td>Chicago</td>
<td>60605.0</td>
<td>276878</td>
<td>2020</td>
<td>december</td>
<td>20990</td>
</tr><tr class="even"><td>11420</td>
<td>Sulzer Regional</td>
<td>4455 N. Lincoln Ave.</td>
<td>Chicago</td>
<td>60625.0</td>
<td>260163</td>
<td>2021</td>
<td>december</td>
<td>21671</td>
</tr><tr class="odd"><td>11454</td>
<td>Harold Washington Library Center</td>
<td>400 S. State St.</td>
<td>Chicago</td>
<td>60605.0</td>
<td>271811</td>
<td>2021</td>
<td>december</td>
<td>21046</td>
</tr><tr class="even"><td>11532</td>
<td>Harold Washington Library Center</td>
<td>400 S. State St.</td>
<td>Chicago</td>
<td>60605.0</td>
<td>273406</td>
<td>2022</td>
<td>december</td>
<td>20480</td>
</tr><tr class="odd"><td>11545</td>
<td>Sulzer Regional</td>
<td>4455 N. Lincoln Ave.</td>
<td>Chicago</td>
<td>60625.0</td>
<td>301340</td>
<td>2022</td>
<td>december</td>
<td>21258</td>
</tr></tbody></table><p>
1434 rows × 8 columns
</p>
<p>We can look at specific columns:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>df_long[[<span class="st">'branch'</span>, <span class="st">'circulation'</span>]]</span></code></pre>
</div>
<table class="table"><thead><tr class="header"><th></th>
<th>branch</th>
<th>circulation</th>
</tr></thead><tbody><tr class="odd"><td>0</td>
<td>Albany Park</td>
<td>8427</td>
</tr><tr class="even"><td>1</td>
<td>Altgeld</td>
<td>1258</td>
</tr><tr class="odd"><td>2</td>
<td>Archer Heights</td>
<td>8104</td>
</tr><tr class="even"><td>3</td>
<td>Austin</td>
<td>1755</td>
</tr><tr class="odd"><td>4</td>
<td>Austin-Irving</td>
<td>12593</td>
</tr><tr class="even"><td>…</td>
<td>…</td>
<td>…</td>
</tr><tr class="odd"><td>11551</td>
<td>Chinatown</td>
<td>3957</td>
</tr><tr class="even"><td>11552</td>
<td>Brainerd</td>
<td>201</td>
</tr><tr class="odd"><td>11553</td>
<td>Brighton Park</td>
<td>1278</td>
</tr><tr class="even"><td>11554</td>
<td>South Chicago</td>
<td>615</td>
</tr><tr class="odd"><td>11555</td>
<td>Chicago Bee</td>
<td>788</td>
</tr></tbody></table><p>
11556 rows × 2 columns
</p>
<p>We can sort our table using <code>.sort_values()</code> to see the
branches with the highest circulation per month:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>df_long.sort_values(<span class="st">'circulation'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<table class="table"><colgroup><col width="5%"><col width="29%"><col width="18%"><col width="7%"><col width="8%"><col width="6%"><col width="5%"><col width="6%"><col width="11%"></colgroup><thead><tr class="header"><th></th>
<th>branch</th>
<th>address</th>
<th>city</th>
<th>zip code</th>
<th>ytd</th>
<th>year</th>
<th>month</th>
<th>circulation</th>
</tr></thead><tbody><tr class="odd"><td>1957</td>
<td>Harold Washington Library Center</td>
<td>400 S. State St.</td>
<td>Chicago</td>
<td>60605.0</td>
<td>966720</td>
<td>2011</td>
<td>march</td>
<td>89122</td>
</tr><tr class="even"><td>2920</td>
<td>Harold Washington Library Center</td>
<td>400 S. State St.</td>
<td>Chicago</td>
<td>60605.0</td>
<td>966720</td>
<td>2011</td>
<td>april</td>
<td>88527</td>
</tr><tr class="odd"><td>2999</td>
<td>Harold Washington Library Center</td>
<td>400 S. State St.</td>
<td>Chicago</td>
<td>60605.0</td>
<td>937649</td>
<td>2012</td>
<td>april</td>
<td>87689</td>
</tr><tr class="even"><td>6772</td>
<td>Harold Washington Library Center</td>
<td>400 S. State St.</td>
<td>Chicago</td>
<td>60605.0</td>
<td>966720</td>
<td>2011</td>
<td>august</td>
<td>85193</td>
</tr><tr class="odd"><td>2036</td>
<td>Harold Washington Library Center</td>
<td>400 S. State St.</td>
<td>Chicago</td>
<td>60605.0</td>
<td>937649</td>
<td>2012</td>
<td>march</td>
<td>84255</td>
</tr><tr class="even"><td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr><tr class="odd"><td>3623</td>
<td>Portage-Cragin</td>
<td>5108 W. Belmont Ave.</td>
<td>Chicago</td>
<td>60641.0</td>
<td>36262</td>
<td>2020</td>
<td>april</td>
<td>0</td>
</tr><tr class="even"><td>3622</td>
<td>Manning</td>
<td>6 S. Hoyne Ave.</td>
<td>Chicago</td>
<td>60612.0</td>
<td>3325</td>
<td>2020</td>
<td>april</td>
<td>0</td>
</tr><tr class="odd"><td>3621</td>
<td>Daley, Richard J. - Bridgeport</td>
<td>3400 S. Halsted St.</td>
<td>Chicago</td>
<td>60608.0</td>
<td>37045</td>
<td>2020</td>
<td>april</td>
<td>0</td>
</tr><tr class="even"><td>3620</td>
<td>Canaryville</td>
<td>642 W. 43rd St.</td>
<td>Chicago</td>
<td>60609.0</td>
<td>4120</td>
<td>2020</td>
<td>april</td>
<td>0</td>
</tr><tr class="odd"><td>3577</td>
<td>Merlo</td>
<td>644 W. Belmont Ave.</td>
<td>Chicago</td>
<td>60657.0</td>
<td>14637</td>
<td>2019</td>
<td>april</td>
<td>0</td>
</tr></tbody></table><p>
11556 rows × 8 columns
</p>
<p>What if we want to tally up the total circulation for each branch
over all years and also see the mean circulation?</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>df_long.groupby(<span class="st">'branch'</span>)[<span class="st">'circulation'</span>].agg(total_circulation<span class="op">=</span><span class="st">'sum'</span>, mean_circulation<span class="op">=</span><span class="st">'mean'</span>)</span></code></pre>
</div>
<table class="table"><thead><tr class="header"><th></th>
<th>total_circulation</th>
<th>mean_circulation</th>
</tr></thead><tbody><tr class="odd"><td>branch</td>
<td></td>
<td></td>
</tr><tr class="even"><td>Albany Park</td>
<td>1024714</td>
<td>7116.069444</td>
</tr><tr class="odd"><td>Altgeld</td>
<td>68358</td>
<td>474.708333</td>
</tr><tr class="even"><td>Archer Heights</td>
<td>803014</td>
<td>5576.486111</td>
</tr><tr class="odd"><td>Austin</td>
<td>200107</td>
<td>1389.631944</td>
</tr><tr class="even"><td>Austin-Irving</td>
<td>1359700</td>
<td>9442.361111</td>
</tr><tr class="odd"><td>…</td>
<td>…</td>
<td>…</td>
</tr><tr class="even"><td>West Pullman</td>
<td>295327</td>
<td>2050.881944</td>
</tr><tr class="odd"><td>West Town</td>
<td>922876</td>
<td>6408.861111</td>
</tr><tr class="even"><td>Whitney M. Young, Jr.</td>
<td>259680</td>
<td>1803.333333</td>
</tr><tr class="odd"><td>Woodson Regional</td>
<td>823793</td>
<td>5720.784722</td>
</tr><tr class="even"><td>Wrightwood-Ashburn</td>
<td>302285</td>
<td>2099.201389</td>
</tr></tbody></table><p>
82 rows × 2 columns
</p>
<ol style="list-style-type: decimal"><li>
<code>df.groupby('branch')</code>: This groups the data by the
‘branch’ column so that all entries in the DataFrame with the same
library branch are grouped together. (This is similar to the SQL
<code>GROUP BY</code> statement or the <code>group_by</code> function in
<code>dplyr</code> in R.)</li>
<li>
<code>['circulation']</code>: After grouping the data by branch,
this specifies that subsequent operations should be performed on the
‘circulation’ column.</li>
<li>
<code>.agg(...)</code>: The <code>agg</code> function is used to
apply one or more aggregation operations to the grouped data. Inside the
<code>agg</code> function:
<ul><li>
<code>total_circulation='sum'</code>: This creates a new column
named ‘total_circulation’ where each entry is the sum of ‘circulation’
for that branch. It totals up all circulation figures within each
branch.</li>
<li>
<code>mean_circulation='mean'</code>: This creates a new column
named ‘mean_circulation’ where each entry is the average ‘circulation’
for that branch. It calculates the mean circulation figures for each
branch.</li>
</ul></li>
</ol><p>If we want to group by more than one variable, we can list those
column names in the <code>.groupby()</code> function.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>df_long.groupby([<span class="st">'branch'</span>, <span class="st">'month'</span>])[<span class="st">'circulation'</span>].agg([<span class="st">'sum'</span>, <span class="st">'mean'</span>])</span></code></pre>
</div>
<table class="table"><thead><tr class="header"><th></th>
<th></th>
<th>sum</th>
<th>mean</th>
</tr></thead><tbody><tr class="odd"><td>branch</td>
<td>month</td>
<td></td>
<td></td>
</tr><tr class="even"><td>Albany Park</td>
<td>april</td>
<td>79599</td>
<td>6633.250000</td>
</tr><tr class="odd"><td></td>
<td>august</td>
<td>91416</td>
<td>7618.000000</td>
</tr><tr class="even"><td></td>
<td>december</td>
<td>77849</td>
<td>6487.416667</td>
</tr><tr class="odd"><td></td>
<td>february</td>
<td>76747</td>
<td>6395.583333</td>
</tr><tr class="even"><td></td>
<td>january</td>
<td>85952</td>
<td>7162.666667</td>
</tr><tr class="odd"><td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr><tr class="even"><td>Wrightwood-Ashburn</td>
<td>march</td>
<td>25817</td>
<td>2151.416667</td>
</tr><tr class="odd"><td></td>
<td>may</td>
<td>22049</td>
<td>1837.416667</td>
</tr><tr class="even"><td></td>
<td>november</td>
<td>24124</td>
<td>2010.333333</td>
</tr><tr class="odd"><td></td>
<td>october</td>
<td>27345</td>
<td>2278.750000</td>
</tr><tr class="even"><td></td>
<td>september</td>
<td>25692</td>
<td>2141.000000</td>
</tr></tbody></table><p>
984 rows × 2 columns
</p>
</section><section><h2 class="section-heading" id="adding-a-date-column">Adding a Date Column<a class="anchor" aria-label="anchor" href="#adding-a-date-column"></a></h2>
<hr class="half-width"><p>In order to plot this data over time in the data visualization we
need to do three things to prepare it. First, we need to combine the
year and month columns into its own column. Second, convert the new date
column to a <a href="https://docs.python.org/3/library/datetime.html" class="external-link">datetime</a>
objec using the Pandas <code>to_datetime</code> function. Third, we
assign the date column as our index for the data. These steps will set
up our data for plotting.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>df_long[<span class="st">'date'</span>] <span class="op">=</span> df_long[<span class="st">'year'</span>] <span class="op">+</span> <span class="st">'-'</span> <span class="op">+</span> df_long[<span class="st">'month'</span>]</span></code></pre>
</div>
<p>This will create a new column in our data frame by adding our year
and month together separated by a <code>-</code>. This setup is not
sufficient for us to use <code>.to_datetime()</code> to convert the
column to something Python and Pandas knows is a date.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>df_long[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(df_long[<span class="st">'date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'%Y-%B'</span>)</span></code></pre>
</div>
<p><code>pd.to_datetime()</code> will do the conversion, but we need to
tell it how we have our date formatted. In this case we have year and
month name spelled out. To find more format codes, see <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" class="external-link uri">https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior</a>.</p>
<p>If we take a look at the date column, we’ll see that datetime
automatically adds a day (always <code>01</code>) in the absence of any
specific day input.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>df_long[<span class="st">'date'</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0       2011-01-01
1       2011-01-01
2       2011-01-01
3       2011-01-01
4       2011-01-01
           ...
11551   2022-12-01
11552   2022-12-01
11553   2022-12-01
11554   2022-12-01
11555   2022-12-01
Name: date, Length: 11556, dtype: datetime64[ns]</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>df_long.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 11556 entries, 0 to 11555
Data columns (total 9 columns):
 #   Column       Non-Null Count  Dtype
---  ------       --------------  -----
 0   branch       11556 non-null  object
 1   address      7716 non-null   object
 2   city         7716 non-null   object
 3   zip code     7716 non-null   float64
 4   ytd          11556 non-null  int64
 5   year         11556 non-null  object
 6   month        11556 non-null  object
 7   circulation  11556 non-null  int64
 8   date         11556 non-null  datetime64[ns]
dtypes: datetime64[ns](1), float64(1), int64(2), object(5)
memory usage: 812.7+ KB</code></pre>
</div>
<p>That worked! Now, we can make the datetime column the index of our
DataFrame. In the Pandas episode we looked at Pandas default numerical
index, but we can also use <code>.set_index()</code> to declare a
specific column as the index of our DataFrame. Using a datetime index
will make it easier for us to plot the DataFrame over time. The first
parameter of <code>.set_index()</code> is the column name and the
<code>inplace=True</code> parameter allows us to modify the DataFrame
without assigning it to a new variable.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>df_long.set_index(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code></pre>
</div>
<p>If we look at the data again, we will see our index will be set to
date.</p>
<p>Let’s save <code>df_long</code> to use in the next episode.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>df_long.to_pickle(<span class="st">'data/df_long.pkl'</span>)</span></code></pre>
</div>
<div id="tidy-data-principles" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="tidy-data-principles" class="callout-inner">
<h3 class="callout-title">Tidy Data Principles</h3>
<div class="callout-content">
<p>How would you reorganize the following table about research data
workshops to follow the three tidy data principles?</p>
<ol style="list-style-type: decimal"><li>Every column holds a single variable.</li>
<li>Every row represents a single observation.</li>
<li>Every cell contains a single value.</li>
</ol><table class="table"><thead><tr class="header"><th>Date</th>
<th>Length</th>
<th>Content</th>
<th>Instructor</th>
</tr></thead><tbody><tr class="odd"><td>2023-01-15</td>
<td>30 min</td>
<td>RDM, DMP</td>
<td>CH</td>
</tr><tr class="even"><td>2023-02-02</td>
<td>2 hours</td>
<td>Python, RDM</td>
<td>CH, TD</td>
</tr><tr class="odd"><td>2023-02-03</td>
<td>90 min</td>
<td>Python</td>
<td>SP</td>
</tr></tbody></table><p>You can use each content unit (e.g., RDM, DMP, Python) as an
observation, and breakdown the length of time or instructor initials to
match the content unit however you like.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<table class="table"><thead><tr class="header"><th>Year</th>
<th>Month</th>
<th>Day</th>
<th>Length (min)</th>
<th>Content</th>
<th>Instructor</th>
</tr></thead><tbody><tr class="odd"><td>2023</td>
<td>01</td>
<td>15</td>
<td>20</td>
<td>RDM</td>
<td>CH</td>
</tr><tr class="even"><td>2023</td>
<td>01</td>
<td>15</td>
<td>10</td>
<td>DMP</td>
<td>CH</td>
</tr><tr class="odd"><td>2023</td>
<td>02</td>
<td>02</td>
<td>100</td>
<td>Python</td>
<td>TD</td>
</tr><tr class="even"><td>2023</td>
<td>02</td>
<td>02</td>
<td>20</td>
<td>RDM</td>
<td>CH</td>
</tr><tr class="odd"><td>2023</td>
<td>02</td>
<td>03</td>
<td>100</td>
<td>Python</td>
<td>SP</td>
</tr></tbody></table></div>
</div>
</div>
</div>
<div id="subsetting-df_long" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="subsetting-df_long" class="callout-inner">
<h3 class="callout-title">Subsetting df_long</h3>
<div class="callout-content">
<p>Using df_long, create a new DataFrame, `low_circ’, that only includes
branches with circulation numbers lower than 500 per month. When you
create a subset DataFrame, show the following columns: branch,
circulation, month, and year. Next, eliminate the rows when the
circulation is equal to 0.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>low_circ <span class="op">=</span> df_long[_________[_________] __ <span class="dv">500</span>]</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>low_circ <span class="op">=</span> _________[_________[_________] <span class="op">!=</span> __]</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>low_circ.sort_values(by<span class="op">=</span><span class="st">'circulation'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>low_circ <span class="op">=</span> df_long[df_long[<span class="st">'circulation'</span>] <span class="op">&lt;</span> <span class="dv">500</span>]</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>low_circ <span class="op">=</span> low_circ[low_circ[<span class="st">'circulation'</span>] <span class="op">!=</span> <span class="dv">0</span>]</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>low_circ.sort_values(by<span class="op">=</span><span class="st">'circulation'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="group-and-aggregate-for-circulation-by-year" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="group-and-aggregate-for-circulation-by-year" class="callout-inner">
<h3 class="callout-title">Group and aggregate for circulation by
year</h3>
<div class="callout-content">
<p>How would you create a subset of <code>df_long</code> that sums up
the circulation by year across all branches? In other words you want a
view of the DataFrame that includes one row for each year, and columns
for ‘year’ and ‘sum’, the latter of which shows the sum of circulation
for all branches in each year.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>df_long.groupby([<span class="st">'year'</span>])[<span class="st">'circulation'</span>].agg([<span class="st">'sum'</span>])</span></code></pre>
</div>
<table class="table"><thead><tr class="header"><th>year</th>
<th>sum</th>
</tr></thead><tbody><tr class="odd"><td>2011</td>
<td>7774198</td>
</tr><tr class="even"><td>2012</td>
<td>7598080</td>
</tr><tr class="odd"><td>2013</td>
<td>6894958</td>
</tr><tr class="even"><td>2014</td>
<td>6406512</td>
</tr><tr class="odd"><td>2015</td>
<td>5953920</td>
</tr><tr class="even"><td>2016</td>
<td>5696456</td>
</tr><tr class="odd"><td>2017</td>
<td>5305624</td>
</tr><tr class="even"><td>2018</td>
<td>4989239</td>
</tr><tr class="odd"><td>2019</td>
<td>4785108</td>
</tr><tr class="even"><td>2020</td>
<td>2726156</td>
</tr><tr class="odd"><td>2021</td>
<td>3184327</td>
</tr><tr class="even"><td>2022</td>
<td>3342472</td>
</tr></tbody></table></div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>In tidy data each variable forms a column, each observation forms a
row, and each type of observational unit forms a table.</li>
<li>Using pandas for data manipulation to reshape data is fundamental
for preparing data for analysis.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="writing-functions.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="data-visualisation.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="writing-functions.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Writing Functions
        </a>
        <a class="chapter-link float-end" href="data-visualisation.html" rel="next">
          Next: Data Visualisation...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/librarycarpentry/lc-python-intro/edit/main/episodes/tidy.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/librarycarpentry/lc-python-intro/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/librarycarpentry/lc-python-intro/" class="external-link">Source</a></p>
        <p>
        <a href="citation.html">Cite</a>
        | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
		</div>
		<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.18.4" class="external-link">sandpaper (0.18.4)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.9" class="external-link">varnish (1.0.9)</a></p>
		</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://librarycarpentry.github.io/lc-python-intro/tidy.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Tidy Data with Pandas",
  "creativeWorkStatus": "active",
  "url": "https://librarycarpentry.github.io/lc-python-intro/tidy.html",
  "identifier": "https://librarycarpentry.github.io/lc-python-intro/tidy.html",
  "dateCreated": "2018-04-12",
  "dateModified": "2025-12-18",
  "datePublished": "2026-01-27"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

